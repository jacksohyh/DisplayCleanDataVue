(function(){"use strict";var e={5950:function(e,t,a){var r=a(5130),n=a(6768),o=a(4232),l=a(144),u=a(1010),i=a(6912),s=a(5234),c=a(4373);const d="https://displaycleandatavueserver.onrender.com",v=(0,s.nY)("auroraStore",{state:()=>({token:sessionStorage.getItem("token")||null,units:null,value:null}),getters:{},actions:{async getToken(){if(this.token)return this.token;try{const e=await c.A.get(`${d}/api/authenticate`);return this.token=e.data.result,sessionStorage.setItem("token",this.token),this.token}catch(e){console.error("Error fetching token from local server:",e)}},async getData(e,t,a,r,n){this.token||await this.getToken();try{const o=await c.A.get(`${d}/api/fetchData`,{headers:{Authorization:`Bearer ${this.token}`},params:{resource:e,dataType:t,valueType:a,startDate:r,endDate:n}});return console.log("Data received:",o.data.result),o.data.result}catch(o){return console.error("Error fetching data:",o),"ERR_NETWORK"===o.code?{error:"Network Error: Unable to reach the server"}:{error:"Error fetching data"}}}}}),p={key:0,class:"loader"},y={key:1,class:"main"},g={class:"selector-container"},f={class:"data-type-dropdown"},h=["value"],b={key:0,class:"data-type-selector"},m={key:1,class:"data-type-selector"},k={class:"chart-type-selector"},E={class:"chart-container"},w={key:2,class:"error"};var L={__name:"ChartView",props:{title:{type:String,required:!0}},setup(e){const t=v(),a=(0,l.KR)(!0),s=(0,l.KR)(null),c=(0,l.KR)(!1),d=(0,l.KR)([]);i.t1.register(i.hE,i.m_,i.s$,i.E8,i.No,i.FN,i.PP,i.kc);const L=(0,l.KR)("bar"),S=(0,l.KR)(""),C=e;"Power"===C.title?S.value="average":"Energy"===C.title&&(S.value="delta"),(0,n.nT)((()=>{"Power"===C.title?(d.value=["GenerationPower","DCGenerationPower","Irradiance","GridPowerExport","StoredPower","ActivePowerEV"],s.value=d.value[0]):"Energy"===C.title?(d.value=["GenerationEnergy","DCGenerationEnergy","Insolation","StorageInEnergy","StorageOutEnergy","GridEnergyExport","GridEnergyImport","SelfConsumedEnergy","ActiveEnergyEV","SessionEnergyEV"],s.value=d.value[0]):(d.value=[],s.value=null)})),(0,n.wB)(s,(async(e,t)=>{e!==t&&(a.value=!0,await O(),a.value=!1)})),(0,n.wB)(S,(async(e,t)=>{e!==t&&(console.log(`Selected data type: ${e}`),await O())})),(0,n.wB)(L,(e=>{console.log(`Selected chart type: ${e}`)}));let X=(0,l.KR)(),D=(0,l.KR)();async function O(){a.value=!0,c.value=!1;try{const{chartDataX:e,chartOptionsY:t}=await P(2024);X.value=e,D.value=t}catch(e){c.value=!0,console.error("Error fetching data:",e)}finally{a.value=!1}}async function P(e){const a=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],r={};let n=null,o=!1;const l=a.map(((a,l)=>{const{startDate:u,endDate:i}=R(e,l+1);return t.getData(C.title.toLowerCase(),s.value,S.value,u,i).then((e=>{e&&"value"in e?(r[a]=e.value,null===n?n=e.units:n!==e.units&&(o=!0)):e&&e.error?(console.warn(e.error),r[a]="error"):r[a]=null}))}));try{await Promise.all(l);const t=o?`Multiple units: ${n}`:n,u=a.map((e=>null===r[e]?"rgba(255, 99, 132, 0.6)":"rgba(75, 192, 192, 0.2)")),i=a.map((e=>null===r[e]?"rgba(255, 99, 132, 1)":"rgba(75, 192, 192, 1)")),s={labels:a,datasets:[{label:t||"Units",data:a.map((e=>r[e])),backgroundColor:u,borderColor:i,borderWidth:1}]},c={responsive:!0,plugins:{title:{display:!0,text:C.title+"("+S.value.charAt(0).toUpperCase()+S.value.slice(1)+")",font:{size:20}},subtitle:{display:!0,text:`Year: ${e}`,font:{size:16},padding:{bottom:10}}},scales:{x:{ticks:{color:function(e){const t=a[e.index],n=r[t];return"error"===n?"red":null===n?"yellow":"green"}},title:{display:!0,text:`Year: ${e}`,font:{size:14},padding:{top:10}}},y:{beginAtZero:!0}}};return{chartDataX:s,chartOptionsY:c}}catch(c){console.error("Error fetching data:",c)}}function R(e,t){const a=`${e}${String(t).padStart(2,"0")}01`,r=new Date(e,t,0).getDate(),n=`${e}${String(t).padStart(2,"0")}${String(r).padStart(2,"0")}`;return{startDate:a,endDate:n}}return(0,n.sV)((async()=>{await O()})),(e,t)=>((0,n.uX)(),(0,n.CE)(n.FK,null,[a.value?((0,n.uX)(),(0,n.CE)("div",p,"Loading data...")):(0,n.Q3)("",!0),a.value||c.value?(0,n.Q3)("",!0):((0,n.uX)(),(0,n.CE)("div",y,[(0,n.Lk)("div",g,[(0,n.Lk)("div",f,[(0,n.bo)((0,n.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e)},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(d.value,(e=>((0,n.uX)(),(0,n.CE)("option",{key:e,value:e},(0,o.v_)(e),9,h)))),128))],512),[[r.u1,s.value]])]),"Power"==C.title?((0,n.uX)(),(0,n.CE)("div",b,[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio",value:"average","onUpdate:modelValue":t[1]||(t[1]=e=>S.value=e)},null,512),[[r.XL,S.value]]),t[8]||(t[8]=(0,n.eW)(" Average "))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio",value:"maximum","onUpdate:modelValue":t[2]||(t[2]=e=>S.value=e)},null,512),[[r.XL,S.value]]),t[9]||(t[9]=(0,n.eW)(" Maximum "))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio",value:"minimum","onUpdate:modelValue":t[3]||(t[3]=e=>S.value=e)},null,512),[[r.XL,S.value]]),t[10]||(t[10]=(0,n.eW)(" Minimum "))])])):(0,n.Q3)("",!0),"Energy"==C.title?((0,n.uX)(),(0,n.CE)("div",m,[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio",value:"delta","onUpdate:modelValue":t[4]||(t[4]=e=>S.value=e)},null,512),[[r.XL,S.value]]),t[11]||(t[11]=(0,n.eW)(" Delta "))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio",value:"cumulative","onUpdate:modelValue":t[5]||(t[5]=e=>S.value=e)},null,512),[[r.XL,S.value]]),t[12]||(t[12]=(0,n.eW)(" Cumulative "))])])):(0,n.Q3)("",!0),(0,n.Lk)("div",k,[(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio",value:"bar","onUpdate:modelValue":t[6]||(t[6]=e=>L.value=e)},null,512),[[r.XL,L.value]]),t[13]||(t[13]=(0,n.eW)(" Bar "))]),(0,n.Lk)("label",null,[(0,n.bo)((0,n.Lk)("input",{type:"radio",value:"line","onUpdate:modelValue":t[7]||(t[7]=e=>L.value=e)},null,512),[[r.XL,L.value]]),t[14]||(t[14]=(0,n.eW)(" Line "))])])]),(0,n.Lk)("div",E,[((0,n.uX)(),(0,n.Wv)((0,n.$y)("bar"===L.value?(0,l.R1)(u.yP):(0,l.R1)(u.N1)),{id:"my-chart-id",options:(0,l.R1)(D),data:(0,l.R1)(X)},null,8,["options","data"]))])])),c.value?((0,n.uX)(),(0,n.CE)("div",w," Server Error ")):(0,n.Q3)("",!0)],64))}},S=a(1241);const C=(0,S.A)(L,[["__scopeId","data-v-83536d9a"]]);var X=C;const D={id:"chart-container"};var O={__name:"App",setup(e){return(e,t)=>((0,n.uX)(),(0,n.CE)("div",D,[(0,n.bF)(X,{title:"Power",dataType:"GenerationPower"}),(0,n.bF)(X,{title:"Energy",dataType:"GenerationEnergy"})]))}};const P=O;var R=P,$=a(1387);const x=[{path:"/",name:"Home",component:R}],A=(0,$.aE)({history:(0,$.LA)(),routes:x});var V=A;const _=(0,r.Ef)(R);_.use((0,s.Ey)()),_.use(V),_.mount("#app")}},t={};function a(r){var n=t[r];if(void 0!==n)return n.exports;var o=t[r]={exports:{}};return e[r].call(o.exports,o,o.exports,a),o.exports}a.m=e,function(){var e=[];a.O=function(t,r,n,o){if(!r){var l=1/0;for(c=0;c<e.length;c++){r=e[c][0],n=e[c][1],o=e[c][2];for(var u=!0,i=0;i<r.length;i++)(!1&o||l>=o)&&Object.keys(a.O).every((function(e){return a.O[e](r[i])}))?r.splice(i--,1):(u=!1,o<l&&(l=o));if(u){e.splice(c--,1);var s=n();void 0!==s&&(t=s)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[r,n,o]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var r in t)a.o(t,r)&&!a.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,r){var n,o,l=r[0],u=r[1],i=r[2],s=0;if(l.some((function(t){return 0!==e[t]}))){for(n in u)a.o(u,n)&&(a.m[n]=u[n]);if(i)var c=i(a)}for(t&&t(r);s<l.length;s++)o=l[s],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(c)},r=self["webpackChunkassignment"]=self["webpackChunkassignment"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=a.O(void 0,[504],(function(){return a(5950)}));r=a.O(r)})();
//# sourceMappingURL=app.6a0b9ef7.js.map